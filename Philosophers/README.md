# Philosophers

*This project has been created as part of the 42 curriculum by okhan.*

## Description

The Philosophers project is an implementation of the classic "Dining Philosophers Problem," a synchronization problem used to illustrate challenges in allocating resources among multiple processes/threads. This project teaches the fundamentals of threading and mutual exclusion through a real-world analogy.

### Goal

Implement a simulation where multiple philosophers sit at a round table with a bowl of spaghetti in the middle. Each philosopher alternates between three activities:
- **Eating**: Requires holding both left and right forks
- **Sleeping**: Resting after a meal
- **Thinking**: Contemplating between meals

The challenge is to prevent philosophers from starving through proper synchronization and resource management using mutexes.

### Key Features

- Multi-threaded simulation of philosophers
- Mutex-based synchronization to protect shared resources (forks)
- Death detection with timing within 10ms accuracy
- Optional meal count tracking to end simulation
- POSIX thread and mutex implementation

## Instructions

### Compilation

```bash
cd philo
make
```

### Usage

```bash
./philo <number_of_philosophers> <time_to_die> <time_to_eat> <time_to_sleep> [number_of_times_each_philosopher_must_eat]
```

### Arguments

- **number_of_philosophers**: The number of philosophers and forks (1-200)
- **time_to_die** (milliseconds): Time before a philosopher dies of starvation if they haven't started eating
- **time_to_eat** (milliseconds): Duration of a meal
- **time_to_sleep** (milliseconds): Duration of sleep
- **number_of_times_each_philosopher_must_eat** (optional): Stops simulation when all philosophers have eaten this many times

### Example

```bash
# 5 philosophers, 800ms to die, 200ms to eat, 200ms to sleep
./philo 5 800 200 200

# Same, but stop after each philosopher eats 10 times
./philo 5 800 200 200 10
```

### Output Format

The program outputs state changes in the format:
```
<timestamp_in_ms> <philosopher_id> <state>
```

States include:
- `has taken a fork`
- `is eating`
- `is sleeping`
- `is thinking`
- `died`

## Resources

### Documentation
- [POSIX Threads (pthreads)](https://man7.org/linux/man-pages/man7/pthreads.7.html)
- [pthread_create(3)](https://man7.org/linux/man-pages/man3/pthread_create.3.html)
- [pthread_mutex_lock(3)](https://man7.org/linux/man-pages/man3/pthread_mutex_lock.3.html)
- [The Dining Philosophers Problem](https://en.wikipedia.org/wiki/Dining_philosophers_problem)

### Related Topics
- Thread synchronization and mutual exclusion
- Deadlock prevention and detection
- Race condition handling
- Resource allocation in concurrent systems

## AI Usage

This project was created with minimal AI assistance. The core logic and threading model were implemented from first principles to ensure a deep understanding of the problem. AI tools were used for:
- **Code review**: Validating synchronization patterns for correctness
- **Norm compliance**: Ensuring adherence to 42 norm standards
- **Refactoring**: Splitting functions to meet norm requirements

No complete functions or significant code sections were generated by AI; all implementations were hand-written and fully understood.

## Build Rules

- `make` or `make all`: Compile the philo program
- `make clean`: Remove object files
- `make fclean`: Remove object files and executable
- `make re`: Clean and recompile

## Notes

- Philosophers are numbered from 1 to n
- Philosopher 1 sits next to philosopher n (round table)
- The program handles edge cases like single philosopher scenarios
- Death detection is accurate within the 10ms tolerance specified
- Global variables are forbidden per 42 norm

## Compliance

- **Language**: C (C99)
- **Compiler Flags**: -Wall -Wextra -Werror -pthread
- **Norm**: 42 Norm compliant (verified with norminette)
- **Memory**: No memory leaks; all resources properly freed
